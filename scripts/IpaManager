import requests # HTTP Requests
import zipfile, StringIO, os, time

class IPAManager():
    
    def downloadFile(url, directory) :
    print('Download file')
    with open(directory + '/' + FILE_NAME, 'wb') as f:
        start = time.clock()
        headers = {'Accept': 'application/octet-stream', 'Authorization' : 'token ' + IOS_GITHUB_TOKEN}
        r = requests.get(url, stream=True, headers=headers)
        total_length = int(r.headers.get('content-length'))
        dl = 0
        if total_length is None: # no content length header
        f.write(r.content)
        else:
        for chunk in r.iter_content(1024):
            dl += len(chunk)
            f.write(chunk)
            done = int(50 * dl / total_length)
            sys.stdout.write("\r[%s%s] %s bps" % ('=' * done, ' ' * (50-done), dl//(time.clock() - start)))
            print ''
    return (time.clock() - start)